~~~wiki
发布与订阅部分总结：
在服务器状态的pubsub_channels字典里保存了所有频道的订阅关系，subscribe命令负责将客户端与被订阅的频道关联到这个字典里面，而unsubscribe命令则负责接触客户端和被退订频道之间的关系
在服务器状态的pubsub_patterns链表中保存了所有模式的订阅关系，psubscribe命令负责将客户端和被订阅的模式记录到这个链表中。而punsubscribe命令负责接触客户端与被退订模式之间的关系
publish命令通过访问pubsub_channels字典来向频道的所有订阅者发布消息，通过访问pubsub_patterns来向所有匹配频道的模式的订阅者发送消息
pubsub命令的三个子命令都是通过读取pubsub_channels字典和pubsub_patterns链表中的信息来实现的
~~~

